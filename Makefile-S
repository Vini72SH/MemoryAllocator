AS = as
LD = ld
LD_FLAGS = -dynamic-linker /lib/x86_64-linux-gnu/ld-linux-x86-64.so.2 /usr/lib/x86_64-linux-gnu/crt1.o /usr/lib/x86_64-linux-gnu/crti.o /usr/lib/x86_64-linux-gnu/crtn.o -lc

# Adicionar flag -g para depuração
AS_FLAGS = --gdwarf-2 -g

FONTES_S_LIBC = MemAllocS.s
OBJS_S_LIBC   = $(FONTES_S_LIBC:%.s=%.o)
EXEC_S_LIBC   = $(FONTES_S_LIBC:%.s=%)

FONTES_S = 
OBJS_S   = $(FONTES_S:%.s=%.o)
EXECS_S  = $(FONTES_S:%.s=%)

.PHONY: all

all: execs_s 

execs_s: $(EXECS_S) $(EXEC_S_LIBC)

$(EXECS_S): %: %.s
	$(AS) $(AS_FLAGS) $< -o $@.o
	$(LD) $@.o -o $@

$(EXEC_S_LIBC): %: %.s
	$(AS) $(AS_FLAGS) $< -o $@.o
	$(LD) $@.o -o $@ $(LD_FLAGS)

clean:
	rm -f $(EXECS_S) $(OBJS_S) $(EXEC_S_LIBC)
